# HG changeset patch
# User Kevin Wern <kevin.m.wern@gmail.com>
# Date Tue, 21 Apr 2015 01:26:11 -0700
# Parent  f214df6ac75f0202e40733be62c5b169d7a40b7f

Bug 1148694 patch 1 - Stop creating a CharsetRule object when parsing @charset rules. r=dbaron

diff --git a/layout/style/nsCSSParser.cpp b/layout/style/nsCSSParser.cpp
--- a/layout/style/nsCSSParser.cpp
+++ b/layout/style/nsCSSParser.cpp
@@ -3004,19 +3004,17 @@ CSSParserImpl::ParseCharsetRule(RuleAppe
   }
 
   nsAutoString charset = mToken.mIdent;
 
   if (!ExpectSymbol(';', true)) {
     return false;
   }
 
-  nsRefPtr<css::CharsetRule> rule = new css::CharsetRule(charset,
-                                                         linenum, colnum);
-  (*aAppendFunc)(rule, aData);
+  // It's intentional that we don't create a rule object for @charset rules.
 
   return true;
 }
 
 bool
 CSSParserImpl::ParseURLOrString(nsString& aURL)
 {
   if (!GetToken(true)) {
