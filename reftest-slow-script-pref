From: L. David Baron <dbaron@dbaron.org>

Disable slow script dialogs during reftest to see if that fixes bug 523934.  r=ted

diff --git a/layout/tools/reftest/runreftest.py b/layout/tools/reftest/runreftest.py
--- a/layout/tools/reftest/runreftest.py
+++ b/layout/tools/reftest/runreftest.py
@@ -60,16 +60,19 @@ def createReftestProfile(options, profil
   "Sets up a profile for reftest."
 
   # Set preferences.
   prefsFile = open(os.path.join(profileDir, "user.js"), "w")
   prefsFile.write("""user_pref("browser.dom.window.dump.enabled", true);
 """)
   prefsFile.write('user_pref("reftest.timeout", %d);' % (options.timeout * 1000))
   prefsFile.write('user_pref("ui.caretBlinkTime", -1);')
+  # no slow script dialogs
+  prefsFile.write('user_pref("dom.max_script_run_time", 0);')
+  prefsFile.write('user_pref("dom.max_chrome_script_run_time", 0);')
   prefsFile.close()
 
   # install the reftest extension bits into the profile
   profileExtensionsPath = os.path.join(profileDir, "extensions")
   os.mkdir(profileExtensionsPath)
   reftestExtensionPath = os.path.join(SCRIPT_DIRECTORY, "reftest")
   extFile = open(os.path.join(profileExtensionsPath, "reftest@mozilla.org"), "w")
   extFile.write(reftestExtensionPath)
