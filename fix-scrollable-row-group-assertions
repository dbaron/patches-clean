From: L. David Baron <dbaron@dbaron.org>

Fix assertions in the scrollable row group case.  (Bug 531461)

diff --git a/layout/tables/nsTableFrame.cpp b/layout/tables/nsTableFrame.cpp
--- a/layout/tables/nsTableFrame.cpp
+++ b/layout/tables/nsTableFrame.cpp
@@ -68,16 +68,17 @@
 #include "nsIScrollableFrame.h"
 #include "nsFrameManager.h"
 #include "nsCSSRendering.h"
 #include "nsLayoutErrors.h"
 #include "nsAutoPtr.h"
 #include "nsCSSFrameConstructor.h"
 #include "nsStyleSet.h"
 #include "nsDisplayList.h"
+#include "nsIScrollableFrame.h"
 
 /********************************************************************************
  ** nsTableReflowState                                                         **
  ********************************************************************************/
 
 struct nsTableReflowState {
 
   // the real reflow state
@@ -1328,16 +1329,21 @@ IsFrameAllowedInTable(nsIAtom* aType)
 }
 #endif
 
 static PRBool
 AnyTablePartHasBorderOrBackground(nsIFrame* aFrame)
 {
   NS_ASSERTION(IsFrameAllowedInTable(aFrame->GetType()), "unexpected frame type");
 
+  nsIScrollableFrame *scrollFrame = do_QueryFrame(aFrame);
+  if (scrollFrame) {
+    return AnyTablePartHasBorderOrBackground(scrollFrame->GetScrolledFrame());
+  }
+
   if (aFrame->GetStyleVisibility()->IsVisible() &&
       (!aFrame->GetStyleBackground()->IsTransparent() ||
        aFrame->GetStyleDisplay()->mAppearance ||
        aFrame->HasBorder()))
     return PR_TRUE;
 
   nsTableCellFrame *cellFrame = do_QueryFrame(aFrame);
   if (cellFrame)
